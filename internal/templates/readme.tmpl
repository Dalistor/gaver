# {{.ProjectName}}

Projeto criado com **Gaver Framework** - Um framework web em Go com CLI, geraÃ§Ã£o de cÃ³digo e ORM estilo Django.

## ğŸš€ ComeÃ§ando

### PrÃ©-requisitos

- Go 1.24.3 ou superior
- {{.DatabaseDriver}} ({{if eq .DatabaseDriver "postgres"}}PostgreSQL{{else if eq .DatabaseDriver "mysql"}}MySQL{{else}}SQLite{{end}})

### InstalaÃ§Ã£o

1. Instalar dependÃªncias:
```bash
go mod tidy
```

2. Configurar variÃ¡veis de ambiente:
```bash
cp .env .env.local
# Edite .env com suas configuraÃ§Ãµes
```

3. Executar migrations:
```bash
gaver migrate
```

4. Iniciar servidor:
```bash
# Para projetos server
go run cmd/server/main.go
# ou
gaver serve

# Para projetos Android/Desktop
gaver serve
# (inicia servidor Go + Quasar dev simultaneamente)
```

## ğŸ“ Estrutura do Projeto

{{if eq .ProjectType "server"}}
```
{{.ProjectName}}/
â”œâ”€â”€ GaverProject.json    # ConfiguraÃ§Ã£o do projeto
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/          # AplicaÃ§Ã£o principal
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ cors/           # ConfiguraÃ§Ã£o CORS
â”‚   â”œâ”€â”€ database/       # ConexÃ£o com banco
â”‚   â”œâ”€â”€ env/            # VariÃ¡veis de ambiente
â”‚   â”œâ”€â”€ middlewares/    # Middlewares HTTP
â”‚   â””â”€â”€ routines/       # Tarefas agendadas
â”œâ”€â”€ modules/            # Seus mÃ³dulos
â”‚   â””â”€â”€ [nome-modulo]/
â”‚       â”œâ”€â”€ models/     # Models
â”‚       â”œâ”€â”€ handlers/   # Controllers
â”‚       â”œâ”€â”€ services/   # LÃ³gica
â”‚       â””â”€â”€ repositories/ # Dados
â””â”€â”€ migrations/         # Migrations SQL
```
{{else if eq .ProjectType "android"}}
```
{{.ProjectName}}/
â”œâ”€â”€ GaverProject.json    # ConfiguraÃ§Ã£o do projeto
â”œâ”€â”€ cmd/server/          # Servidor Go (backend)
â”œâ”€â”€ frontend/            # AplicaÃ§Ã£o Quasar
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ composables/ # Composables Vue reutilizÃ¡veis
â”‚   â”‚   â”‚   â””â”€â”€ useApi.ts
â”‚   â”‚   â”œâ”€â”€ api/         # Arquivos JS/TS para comunicaÃ§Ã£o com API
â”‚   â”‚   â”‚   â””â”€â”€ client.js
â”‚   â”‚   â”œâ”€â”€ components/  # Componentes Vue
â”‚   â”‚   â”œâ”€â”€ pages/       # PÃ¡ginas/views
â”‚   â”‚   â”œâ”€â”€ layouts/     # Layouts
â”‚   â”‚   â”œâ”€â”€ router/      # ConfiguraÃ§Ã£o de rotas (history mode)
â”‚   â”‚   â””â”€â”€ boot/        # Boot files do Quasar
â”‚   â”œâ”€â”€ quasar.config.js # ConfiguraÃ§Ã£o Quasar (proxy para servidor Go)
â”‚   â”œâ”€â”€ capacitor.config.js
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ android/             # Projeto Android nativo
â”œâ”€â”€ config/              # ConfiguraÃ§Ãµes backend
â”œâ”€â”€ modules/             # MÃ³dulos backend
â””â”€â”€ migrations/          # SQL migrations
```
{{else if eq .ProjectType "desktop"}}
```
{{.ProjectName}}/
â”œâ”€â”€ GaverProject.json    # ConfiguraÃ§Ã£o do projeto
â”œâ”€â”€ cmd/server/          # Servidor Go (backend)
â”œâ”€â”€ frontend/            # AplicaÃ§Ã£o Quasar
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ composables/ # Composables Vue reutilizÃ¡veis
â”‚   â”‚   â”‚   â””â”€â”€ useApi.ts
â”‚   â”‚   â”œâ”€â”€ api/         # Arquivos JS/TS para comunicaÃ§Ã£o com API
â”‚   â”‚   â”‚   â””â”€â”€ client.js
â”‚   â”‚   â”œâ”€â”€ components/  # Componentes Vue
â”‚   â”‚   â”œâ”€â”€ pages/       # PÃ¡ginas/views
â”‚   â”‚   â”œâ”€â”€ layouts/     # Layouts
â”‚   â”‚   â”œâ”€â”€ router/      # ConfiguraÃ§Ã£o de rotas (history mode)
â”‚   â”‚   â””â”€â”€ boot/        # Boot files do Quasar
â”‚   â”œâ”€â”€ quasar.config.js # ConfiguraÃ§Ã£o Quasar (proxy para servidor Go)
â”‚   â”œâ”€â”€ src-electron/    # ConfiguraÃ§Ã£o Electron
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ config/              # ConfiguraÃ§Ãµes backend
â”œâ”€â”€ modules/             # MÃ³dulos backend
â””â”€â”€ migrations/         # SQL migrations
```
{{else if eq .ProjectType "web"}}
```
{{.ProjectName}}/
â”œâ”€â”€ GaverProject.json    # ConfiguraÃ§Ã£o do projeto
â”œâ”€â”€ cmd/server/          # Servidor Go (backend)
â”œâ”€â”€ frontend/            # AplicaÃ§Ã£o Quasar
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ composables/ # Composables Vue reutilizÃ¡veis
â”‚   â”‚   â”‚   â””â”€â”€ useApi.ts
â”‚   â”‚   â”œâ”€â”€ api/         # Arquivos JS/TS para comunicaÃ§Ã£o com API
â”‚   â”‚   â”‚   â””â”€â”€ client.js
â”‚   â”‚   â”œâ”€â”€ components/  # Componentes Vue
â”‚   â”‚   â”œâ”€â”€ pages/       # PÃ¡ginas/views
â”‚   â”‚   â”œâ”€â”€ layouts/     # Layouts
â”‚   â”‚   â”œâ”€â”€ router/      # ConfiguraÃ§Ã£o de rotas (history mode)
â”‚   â”‚   â””â”€â”€ boot/        # Boot files do Quasar
â”‚   â”œâ”€â”€ quasar.config.js # ConfiguraÃ§Ã£o Quasar (proxy para servidor Go)
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ config/              # ConfiguraÃ§Ãµes backend
â”œâ”€â”€ modules/             # MÃ³dulos backend
â””â”€â”€ migrations/         # SQL migrations
```
{{else}}
```
{{.ProjectName}}/
â”œâ”€â”€ GaverProject.json    # ConfiguraÃ§Ã£o do projeto
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/          # AplicaÃ§Ã£o principal
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ cors/           # ConfiguraÃ§Ã£o CORS
â”‚   â”œâ”€â”€ database/       # ConexÃ£o com banco
â”‚   â”œâ”€â”€ env/            # VariÃ¡veis de ambiente
â”‚   â”œâ”€â”€ middlewares/    # Middlewares HTTP
â”‚   â””â”€â”€ routines/       # Tarefas agendadas
â”œâ”€â”€ modules/            # Seus mÃ³dulos
â””â”€â”€ migrations/         # Migrations SQL
```
{{end}}

{{if or (eq .ProjectType "android") (eq .ProjectType "desktop")}}
## ğŸ¨ Frontend com Quasar

Este projeto inclui Quasar Framework prÃ©-configurado:

- **Proxy automÃ¡tico**: Frontend configurado para apontar ao servidor Go (localhost:8080)
- **Router history mode**: URLs sem # (hash)
- **Estrutura organizada**: Pastas separadas para facilitar desenvolvimento
- **Cliente API base**: Arquivo `frontend/src/api/client.js` prÃ©-configurado
- **Composable useApi**: Composable Vue reutilizÃ¡vel em `frontend/src/composables/useApi.ts`

### Desenvolvimento Frontend

1. O servidor Go e Quasar dev rodam simultaneamente com `gaver serve`
2. Crie scripts de conexÃ£o com API em `frontend/src/api/`
3. Desenvolva componentes em `frontend/src/components/`
4. Crie pÃ¡ginas em `frontend/src/pages/`
5. Use o composable `useApi` para facilitar chamadas Ã  API

### Exemplo de uso do useApi

```vue
<script setup>
import { useApi } from 'src/composables/useApi'

const { get, post, loading, error } = useApi()

const fetchUsers = async () => {
  try {
    const users = await get('/users')
    console.log(users)
  } catch (err) {
    console.error(err)
  }
}
</script>
```

{{if eq .ProjectType "android"}}
### Android

- **Capacitor**: Configurado para desenvolvimento Android
- **Filesystem**: Suporte a armazenamento local via filesystem
- **Build**: Execute `gaver build` para gerar APK
{{else if eq .ProjectType "desktop"}}
### Desktop

- **Electron**: Configurado para aplicaÃ§Ãµes desktop
- **Build**: Execute `gaver build` para gerar executÃ¡vel (.exe no Windows)
{{else if eq .ProjectType "web"}}
### Web

- **SPA**: Single Page Application configurada
- **Build**: Execute `gaver build` para gerar arquivos estÃ¡ticos em `dist/spa`
- **Deploy**: Os arquivos podem ser servidos por qualquer servidor web (Nginx, Apache, etc)
{{end}}
{{end}}

## ğŸ”„ Sistema de Rotinas

O projeto inclui um sistema de **rotinas agendadas** (tarefas em background) que rodam automaticamente em intervalos definidos.

### Como funciona

As rotinas sÃ£o definidas em `config/routines/routines.go` e sÃ£o iniciadas automaticamente com o servidor.

### Exemplos de uso

```go
// Em config/routines/routines.go
func (m *Manager) RegisterDefaultRoutines() {
    // Limpeza de dados a cada 24 horas
    m.Register("cleanup", 24*time.Hour, func() {
        log.Println("Limpando dados antigos...")
        // Seu cÃ³digo aqui
    })

    // SincronizaÃ§Ã£o a cada 1 hora
    m.Register("sync", 1*time.Hour, func() {
        log.Println("Sincronizando dados...")
        // Seu cÃ³digo aqui
    })

    // VerificaÃ§Ã£o a cada 5 minutos
    m.Register("check", 5*time.Minute, func() {
        log.Println("Verificando sistema...")
        // Seu cÃ³digo aqui
    })
}
```

### Casos de uso comuns

- âœ… Limpeza de dados antigos
- âœ… SincronizaÃ§Ã£o com APIs externas
- âœ… Envio de emails/notificaÃ§Ãµes agendadas
- âœ… GeraÃ§Ã£o de relatÃ³rios
- âœ… Processamento de filas
- âœ… Health checks do sistema
- âœ… Backup de dados

### Desabilitar rotinas

Para desabilitar o sistema de rotinas, comente as linhas no `main.go`:

```go
// routineManager := routines.NewManager()
// routineManager.RegisterDefaultRoutines()
// routineManager.Start()
// defer routineManager.Stop()
```

## ğŸ› ï¸ Comandos Gaver

### Servidor

```bash
# Rodar servidor
gaver serve

# Para projetos Android/Desktop, tambÃ©m inicia o Quasar dev server
# Para Android, use --android para abrir Android Studio
gaver serve --android
```

### Build

```bash
# Compilar projeto
gaver build

# Android: gera APK em frontend/dist e frontend/android/app/build/outputs/apk/
# Desktop: gera .exe em frontend/dist/electron/
# Server: gera bin/server
```

### Gerar Model

```bash
gaver generate model User name:string email:string:unique age:int
```

### Gerar Handler

```bash
gaver generate handler User
```

### Migrations

```bash
# Criar migration
gaver migrate:create nome_da_migration

# Executar migrations pendentes
gaver migrate

# Ver status
gaver migrate:status

# Reverter Ãºltima migration
gaver migrate:rollback
```

## ğŸ“ API Endpoints

### Rotas BÃ¡sicas

- `GET /` - PÃ¡gina inicial
- `GET /health` - Health check
- `GET /api/v1/ping` - Teste de conectividade

### Adicionar novas rotas

Em `cmd/server/main.go`:

```go
api := router.Group("/api/v1")
{
    // Suas rotas aqui
    api.GET("/users", userHandler.List)
    api.POST("/users", userHandler.Create)
    api.GET("/users/:id", userHandler.Get)
    api.PUT("/users/:id", userHandler.Update)
    api.DELETE("/users/:id", userHandler.Delete)
}
```

## ğŸ” Middlewares

### DisponÃ­veis

- **Logger** - Registra todas as requisiÃ§Ãµes
- **CORS** - ConfiguraÃ§Ã£o de CORS
- **Auth** - AutenticaÃ§Ã£o (implementar)
- **RateLimiter** - Limite de requisiÃ§Ãµes (implementar)
- **APIKeyAuth** - AutenticaÃ§Ã£o via API Key (implementar)

### Aplicar middleware

```go
// Global
router.Use(middlewares.Auth())

// Em grupo especÃ­fico
api := router.Group("/api/v1")
api.Use(middlewares.APIKeyAuth())
{
    api.GET("/protected", handler)
}

// Em rota especÃ­fica
router.GET("/admin", middlewares.Auth(), adminHandler)
```

## ğŸ—„ï¸ Banco de Dados

### ConfiguraÃ§Ã£o

Configure em `.env`:

```env
DB_HOST=localhost
DB_PORT={{.DatabasePort}}
DB_USER={{.DatabaseUser}}
DB_PASSWORD=sua_senha
DB_NAME={{.ProjectName}}
```

### ConexÃ£o

A conexÃ£o Ã© estabelecida automaticamente no `main.go`. Para usar em outros arquivos:

```go
import "{{.ProjectName}}/config/database"

// Usar a instÃ¢ncia global
database.DB.Find(&users)
```

## ğŸ“¦ DependÃªncias

- **Gin** - Framework HTTP
- **GORM** - ORM
- **godotenv** - VariÃ¡veis de ambiente

## ğŸ¤ Contribuindo

1. Fork o projeto
2. Crie uma branch (`git checkout -b feature/MinhaFeature`)
3. Commit suas mudanÃ§as (`git commit -m 'Adiciona MinhaFeature'`)
4. Push para a branch (`git push origin feature/MinhaFeature`)
5. Abra um Pull Request

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT.

---

**Desenvolvido com â¤ï¸ usando Gaver Framework**

