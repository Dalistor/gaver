# {{.ProjectName}}

Projeto criado com **Gaver Framework** - Um framework web em Go com CLI, geraÃ§Ã£o de cÃ³digo e ORM estilo Django.

## ğŸš€ ComeÃ§ando

### PrÃ©-requisitos

- Go 1.24.3 ou superior
- {{.DatabaseDriver}} ({{if eq .DatabaseDriver "postgres"}}PostgreSQL{{else if eq .DatabaseDriver "mysql"}}MySQL{{else}}SQLite{{end}})

### InstalaÃ§Ã£o

1. Instalar dependÃªncias:
```bash
go mod tidy
```

2. Configurar variÃ¡veis de ambiente:
```bash
cp .env .env.local
# Edite .env com suas configuraÃ§Ãµes
```

3. Executar migrations:
```bash
gaver migrate
```

4. Iniciar servidor:
```bash
go run cmd/server/main.go
```

## ğŸ“ Estrutura do Projeto

```
{{.ProjectName}}/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/          # AplicaÃ§Ã£o principal
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ cors/           # ConfiguraÃ§Ã£o CORS
â”‚   â”œâ”€â”€ database/       # ConexÃ£o com banco
â”‚   â”œâ”€â”€ env/            # VariÃ¡veis de ambiente
â”‚   â”œâ”€â”€ middlewares/    # Middlewares HTTP
â”‚   â””â”€â”€ routines/       # Tarefas agendadas
â”œâ”€â”€ internal/
â”‚   â””â”€â”€ app/
â”‚       â”œâ”€â”€ handlers/   # Controllers HTTP
â”‚       â”œâ”€â”€ models/     # Models do banco
â”‚       â”œâ”€â”€ repositories/ # Camada de dados
â”‚       â””â”€â”€ services/   # LÃ³gica de negÃ³cio
â””â”€â”€ migrations/         # Migrations SQL
```

## ğŸ”„ Sistema de Rotinas

O projeto inclui um sistema de **rotinas agendadas** (tarefas em background) que rodam automaticamente em intervalos definidos.

### Como funciona

As rotinas sÃ£o definidas em `config/routines/routines.go` e sÃ£o iniciadas automaticamente com o servidor.

### Exemplos de uso

```go
// Em config/routines/routines.go
func (m *Manager) RegisterDefaultRoutines() {
    // Limpeza de dados a cada 24 horas
    m.Register("cleanup", 24*time.Hour, func() {
        log.Println("Limpando dados antigos...")
        // Seu cÃ³digo aqui
    })

    // SincronizaÃ§Ã£o a cada 1 hora
    m.Register("sync", 1*time.Hour, func() {
        log.Println("Sincronizando dados...")
        // Seu cÃ³digo aqui
    })

    // VerificaÃ§Ã£o a cada 5 minutos
    m.Register("check", 5*time.Minute, func() {
        log.Println("Verificando sistema...")
        // Seu cÃ³digo aqui
    })
}
```

### Casos de uso comuns

- âœ… Limpeza de dados antigos
- âœ… SincronizaÃ§Ã£o com APIs externas
- âœ… Envio de emails/notificaÃ§Ãµes agendadas
- âœ… GeraÃ§Ã£o de relatÃ³rios
- âœ… Processamento de filas
- âœ… Health checks do sistema
- âœ… Backup de dados

### Desabilitar rotinas

Para desabilitar o sistema de rotinas, comente as linhas no `main.go`:

```go
// routineManager := routines.NewManager()
// routineManager.RegisterDefaultRoutines()
// routineManager.Start()
// defer routineManager.Stop()
```

## ğŸ› ï¸ Comandos Gaver

### Gerar Model

```bash
gaver generate model User name:string email:string:unique age:int
```

### Gerar Handler

```bash
gaver generate handler User
```

### Migrations

```bash
# Criar migration
gaver migrate:create nome_da_migration

# Executar migrations pendentes
gaver migrate

# Ver status
gaver migrate:status

# Reverter Ãºltima migration
gaver migrate:rollback
```

## ğŸ“ API Endpoints

### Rotas BÃ¡sicas

- `GET /` - PÃ¡gina inicial
- `GET /health` - Health check
- `GET /api/v1/ping` - Teste de conectividade

### Adicionar novas rotas

Em `cmd/server/main.go`:

```go
api := router.Group("/api/v1")
{
    // Suas rotas aqui
    api.GET("/users", userHandler.List)
    api.POST("/users", userHandler.Create)
    api.GET("/users/:id", userHandler.Get)
    api.PUT("/users/:id", userHandler.Update)
    api.DELETE("/users/:id", userHandler.Delete)
}
```

## ğŸ” Middlewares

### DisponÃ­veis

- **Logger** - Registra todas as requisiÃ§Ãµes
- **CORS** - ConfiguraÃ§Ã£o de CORS
- **Auth** - AutenticaÃ§Ã£o (implementar)
- **RateLimiter** - Limite de requisiÃ§Ãµes (implementar)
- **APIKeyAuth** - AutenticaÃ§Ã£o via API Key (implementar)

### Aplicar middleware

```go
// Global
router.Use(middlewares.Auth())

// Em grupo especÃ­fico
api := router.Group("/api/v1")
api.Use(middlewares.APIKeyAuth())
{
    api.GET("/protected", handler)
}

// Em rota especÃ­fica
router.GET("/admin", middlewares.Auth(), adminHandler)
```

## ğŸ—„ï¸ Banco de Dados

### ConfiguraÃ§Ã£o

Configure em `.env`:

```env
DB_HOST=localhost
DB_PORT={{.DatabasePort}}
DB_USER={{.DatabaseUser}}
DB_PASSWORD=sua_senha
DB_NAME={{.ProjectName}}
```

### ConexÃ£o

A conexÃ£o Ã© estabelecida automaticamente no `main.go`. Para usar em outros arquivos:

```go
import "{{.ProjectName}}/config/database"

// Usar a instÃ¢ncia global
database.DB.Find(&users)
```

## ğŸ“¦ DependÃªncias

- **Gin** - Framework HTTP
- **GORM** - ORM
- **godotenv** - VariÃ¡veis de ambiente

## ğŸ¤ Contribuindo

1. Fork o projeto
2. Crie uma branch (`git checkout -b feature/MinhaFeature`)
3. Commit suas mudanÃ§as (`git commit -m 'Adiciona MinhaFeature'`)
4. Push para a branch (`git push origin feature/MinhaFeature`)
5. Abra um Pull Request

## ğŸ“„ LicenÃ§a

Este projeto estÃ¡ sob a licenÃ§a MIT.

---

**Desenvolvido com â¤ï¸ usando Gaver Framework**

